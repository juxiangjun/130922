package com.eme.ims.server;import org.apache.mina.core.session.IoSession;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import com.eme.ims.codec.Message;import com.eme.ims.codec.MsgProtocol;import com.eme.ims.server.handler.ConnectionHandler;import com.eme.ims.server.handler.MessageHandler;public enum ActionDispatcher {	INSTANCE;	private static Logger logger = LoggerFactory.getLogger(ActionDispatcher.class);		public void dispatch(IoSession session, Message message) {				switch(message.getCommandId()) {					case MsgProtocol.Command.REGISTRATION : this.connect(session, message); break;			case MsgProtocol.Command.DISCONNECT : this.disconnect(session, message); break;			case MsgProtocol.Command.SEND_P2P_MESSAGE : this.sendP2PMesssage(session, message); break;						default: this.unknown();					}	}		private void sendP2PMesssage(IoSession session, Message message) {		MessageHandler handler = MessageHandler.INSTANCE;		handler.sendP2PMessage(session, message);	}		private void connect(IoSession session, Message messsage) {		ConnectionHandler handler = ConnectionHandler.INSTANCE;		handler.connect(session, messsage);	}		public void disconnect(IoSession session, Message message) {		ConnectionHandler handler = ConnectionHandler.INSTANCE;		handler.disconnect(message);	}		private void unknown() {		logger.warn("Unknow Command Id...requests will be dropped by server.");	}}