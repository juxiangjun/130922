package com.eme.ims.client;import org.apache.mina.core.service.IoHandlerAdapter;import org.apache.mina.core.session.IdleStatus;import org.apache.mina.core.session.IoSession;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import com.eme.ims.codec.Message;import com.eme.ims.codec.MsgProtocol;public class ClientHandler  extends IoHandlerAdapter {		private Logger logger = LoggerFactory.getLogger(ClientHandler.class);		public void sessionCreated(IoSession session) throws Exception {        //TODO session created.    }    public void sessionOpened(IoSession session) throws Exception {        //TODO session opened    }    public void sessionClosed(IoSession session) throws Exception {        //TODO session closed    }    public void sessionIdle(IoSession session, IdleStatus status) throws Exception {        //TODO session idle    }    public void exceptionCaught(IoSession session, Throwable cause) throws Exception {    	logger.error("exception encoutered:"+cause);    }    public void messageReceived(IoSession session, Object message) throws Exception {    	logger.info("message received.");    	if (message instanceof Message) {    		Message msg = (Message) message;    		logger.info("from:"+ msg.getFrom());    		logger.info("to:"+ msg.getTo());    		logger.info("commandId:"+ msg.getCommandId());    		logger.info("contents:"+ msg.getContents());    		if (msg.getCommandId() == MsgProtocol.Command.SEND_P2P_MESSAGE) {	     		String to = msg.getFrom();	    		msg.setFrom(msg.getTo());	    		msg.setTo(to);	    		msg.setContents("JAVA:" + msg.getContents());	    		session.write(msg);    		}    	}    	    }    public void messageSent(IoSession session, Object message) throws Exception {        //TODO message sent.    }}