package com.eme.ims.server;import java.util.ArrayList;import java.util.HashMap;import java.util.List;import java.util.Map;import org.apache.mina.core.session.IoSession;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import redis.clients.jedis.Jedis;import com.eme.ims.cache.JedisPool;public enum SessionPoolManager {		INSTANCE;	private static Map<String, Object> pool = new HashMap<String, Object>(); 	private Logger logger = LoggerFactory.getLogger(SessionPoolManager.class);	 	private JedisPool jedisPool; 	 	public List<IoSession> getGroupSessions(String groupId) { 		Jedis jedis = jedisPool.getJedis(); 		Object obj = jedis.get(groupId); 		List<IoSession> sessions = null; 		if (obj != null) { 			@SuppressWarnings("unchecked")			List<String> list = (List<String>) obj;	 		if (null != list && list.size()>0) {	 			sessions = new ArrayList<IoSession>();	 			for (String key : list) {	 				IoSession session = this.getSession(key);	  				if (null != session) {	  					sessions.add(session);	  				}	 			}	 		} 		} 		return sessions; 	}		public void add(String key, IoSession session) {		synchronized(pool) {			pool.put(key, session);		}	}		public void remove(String key) {		synchronized(pool) {			pool.remove(key);		}	}		public IoSession getSession(String key) {				IoSession result = null;		Object obj = pool.get(key);				if (null != obj) {			result = (IoSession) obj;		} else {			logger.debug("has no IoSession in pool ["+key+"]");		}				return result;	}			public int getPoolSize() {				int result = 0;				synchronized(pool) {			result = pool.size();		}				return result;	}		public void setJedisPool(JedisPool jedisPool) {		this.jedisPool = jedisPool;	}}